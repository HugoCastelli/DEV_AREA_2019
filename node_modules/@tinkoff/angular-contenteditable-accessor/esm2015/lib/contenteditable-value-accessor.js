/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Directive, ElementRef, forwardRef, HostListener, Inject, Renderer2, } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
/*
 * This is a barebones contenteditable {@link ControlValueAccessor} allowing you to use
 * Angular forms with native contenteditable HTML. For security reasons you might want
 * to consider sanitizing pasted/dropped content before using it. Also make sure that
 * you do not set any dangerous content as control value yourself, because directive
 * just outputs control value as-is.
 */
export class ContenteditableValueAccessor {
    /**
     * @param {?} elementRef
     * @param {?} renderer
     */
    constructor(elementRef, renderer) {
        this.elementRef = elementRef;
        this.renderer = renderer;
        /*
             * MutationObserver IE11 fallback (as opposed to input event for modern browsers).
             * When mutation removes a tag, i.e. delete is pressed on the last remaining character
             * inside a tag â€” callback is triggered before the DOM is actually changed, therefore
             * setTimeout is used
             */
        this.observer = new MutationObserver((/**
         * @return {?}
         */
        () => {
            setTimeout((/**
             * @return {?}
             */
            () => {
                this.onChange(ContenteditableValueAccessor.processValue(this.elementRef.nativeElement.innerHTML));
            }));
        }));
        /*
             * onTouch callback that marks control as touched and allows FormHooks use
             */
        this.onTouched = (/**
         * @return {?}
         */
        () => { });
        /*
             * onChange callback that writes value to control and allows FormHooks use
             */
        this.onChange = (/**
         * @return {?}
         */
        () => { });
    }
    /*
         * To support IE11 MutationObserver is used to monitor changes to the content
         */
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.observer.observe(this.elementRef.nativeElement, {
            characterData: true,
            childList: true,
            subtree: true,
        });
    }
    /*
         * Disconnect MutationObserver IE11 fallback on destroy
         */
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.observer.disconnect();
    }
    /*
         * Listen to input events to write innerHTML value into control,
         * also disconnect MutationObserver as it is not needed if this
         * event works in current browser
         */
    /**
     * @return {?}
     */
    onInput() {
        this.observer.disconnect();
        this.onChange(ContenteditableValueAccessor.processValue(this.elementRef.nativeElement.innerHTML));
    }
    /*
         * Listen to blur event to mark control as touched
         */
    /**
     * @return {?}
     */
    onBlur() {
        this.onTouched();
    }
    /*
         * Reacts to external change
         *
         * @see {@link ControlValueAccessor#writeValue}
         */
    /**
     * @param {?} value
     * @return {?}
     */
    writeValue(value) {
        this.renderer.setProperty(this.elementRef.nativeElement, 'innerHTML', ContenteditableValueAccessor.processValue(value));
    }
    /*
         * Registers onChange callback
         *
         * @see {@link ControlValueAccessor#registerOnChange}
         */
    /**
     * @param {?} onChange
     * @return {?}
     */
    registerOnChange(onChange) {
        this.onChange = onChange;
    }
    /*
         * Registers onTouch callback
         *
         * @see {@link ControlValueAccessor#registerOnTouched}
         */
    /**
     * @param {?} onTouched
     * @return {?}
     */
    registerOnTouched(onTouched) {
        this.onTouched = onTouched;
    }
    /*
         * Sets disabled state by setting contenteditable attribute to true/false
         *
         * @see {@link ControlValueAccessor#setDisabledState}
         */
    /**
     * @param {?} disabled
     * @return {?}
     */
    setDisabledState(disabled) {
        this.renderer.setAttribute(this.elementRef.nativeElement, 'contenteditable', String(!disabled));
    }
    /*
         * null and other falsy control values are treated as empty string to
         * prevent IE11 outputting 'null', also single <br> is replaced with empty
         * string when passed to the control
         */
    /**
     * @private
     * @param {?} value
     * @return {?}
     */
    static processValue(value) {
        /** @type {?} */
        const processed = value || '';
        return processed.trim() === '<br>' ? '' : processed;
    }
}
ContenteditableValueAccessor.decorators = [
    { type: Directive, args: [{
                selector: '[contenteditable][formControlName], [contenteditable][formControl], [contenteditable][ngModel]',
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => ContenteditableValueAccessor)),
                        multi: true,
                    },
                ],
            },] }
];
/** @nocollapse */
ContenteditableValueAccessor.ctorParameters = () => [
    { type: ElementRef, decorators: [{ type: Inject, args: [ElementRef,] }] },
    { type: Renderer2, decorators: [{ type: Inject, args: [Renderer2,] }] }
];
ContenteditableValueAccessor.propDecorators = {
    onInput: [{ type: HostListener, args: ['input',] }],
    onBlur: [{ type: HostListener, args: ['blur',] }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    ContenteditableValueAccessor.prototype.observer;
    /**
     * @type {?}
     * @private
     */
    ContenteditableValueAccessor.prototype.onTouched;
    /**
     * @type {?}
     * @private
     */
    ContenteditableValueAccessor.prototype.onChange;
    /**
     * @type {?}
     * @private
     */
    ContenteditableValueAccessor.prototype.elementRef;
    /**
     * @type {?}
     * @private
     */
    ContenteditableValueAccessor.prototype.renderer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudGVkaXRhYmxlLXZhbHVlLWFjY2Vzc29yLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRpbmtvZmYvYW5ndWxhci1jb250ZW50ZWRpdGFibGUtYWNjZXNzb3IvIiwic291cmNlcyI6WyJsaWIvY29udGVudGVkaXRhYmxlLXZhbHVlLWFjY2Vzc29yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBRUgsU0FBUyxFQUNULFVBQVUsRUFDVixVQUFVLEVBQ1YsWUFBWSxFQUNaLE1BQU0sRUFFTixTQUFTLEdBQ1osTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUF1QixpQkFBaUIsRUFBQyxNQUFNLGdCQUFnQixDQUFDOzs7Ozs7OztBQW9CdkUsTUFBTSxPQUFPLDRCQUE0Qjs7Ozs7SUE0QnJDLFlBQ3lDLFVBQXNCLEVBQ3ZCLFFBQW1CO1FBRGxCLGVBQVUsR0FBVixVQUFVLENBQVk7UUFDdkIsYUFBUSxHQUFSLFFBQVEsQ0FBVzs7Ozs7OztRQXRCbkQsYUFBUSxHQUFHLElBQUksZ0JBQWdCOzs7UUFBQyxHQUFHLEVBQUU7WUFDekMsVUFBVTs7O1lBQUMsR0FBRyxFQUFFO2dCQUNaLElBQUksQ0FBQyxRQUFRLENBQ1QsNEJBQTRCLENBQUMsWUFBWSxDQUNyQyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQzFDLENBQ0osQ0FBQztZQUNOLENBQUMsRUFBQyxDQUFDO1FBQ1AsQ0FBQyxFQUFDLENBQUM7Ozs7UUFLSyxjQUFTOzs7UUFBRyxHQUFHLEVBQUUsR0FBRSxDQUFDLEVBQUM7Ozs7UUFLckIsYUFBUTs7O1FBQTRCLEdBQUcsRUFBRSxHQUFFLENBQUMsRUFBQztJQUtsRCxDQUFDOzs7Ozs7O0lBS0osZUFBZTtRQUNYLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUFFO1lBQ2pELGFBQWEsRUFBRSxJQUFJO1lBQ25CLFNBQVMsRUFBRSxJQUFJO1lBQ2YsT0FBTyxFQUFFLElBQUk7U0FDaEIsQ0FBQyxDQUFDO0lBQ1AsQ0FBQzs7Ozs7OztJQUtELFdBQVc7UUFDUCxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQy9CLENBQUM7Ozs7Ozs7OztJQVFELE9BQU87UUFDSCxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQzNCLElBQUksQ0FBQyxRQUFRLENBQ1QsNEJBQTRCLENBQUMsWUFBWSxDQUNyQyxJQUFJLENBQUMsVUFBVSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQzFDLENBQ0osQ0FBQztJQUNOLENBQUM7Ozs7Ozs7SUFNRCxNQUFNO1FBQ0YsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ3JCLENBQUM7Ozs7Ozs7Ozs7SUFPRCxVQUFVLENBQUMsS0FBb0I7UUFDM0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQ3JCLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUM3QixXQUFXLEVBQ1gsNEJBQTRCLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUNuRCxDQUFDO0lBQ04sQ0FBQzs7Ozs7Ozs7OztJQU9ELGdCQUFnQixDQUFDLFFBQWlDO1FBQzlDLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0lBQzdCLENBQUM7Ozs7Ozs7Ozs7SUFPRCxpQkFBaUIsQ0FBQyxTQUFxQjtRQUNuQyxJQUFJLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztJQUMvQixDQUFDOzs7Ozs7Ozs7O0lBT0QsZ0JBQWdCLENBQUMsUUFBaUI7UUFDOUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQ3RCLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxFQUM3QixpQkFBaUIsRUFDakIsTUFBTSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQ3BCLENBQUM7SUFDTixDQUFDOzs7Ozs7Ozs7OztJQU9PLE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBb0I7O2NBQ3RDLFNBQVMsR0FBRyxLQUFLLElBQUksRUFBRTtRQUU3QixPQUFPLFNBQVMsQ0FBQyxJQUFJLEVBQUUsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO0lBQ3hELENBQUM7OztZQTFJSixTQUFTLFNBQUM7Z0JBQ1AsUUFBUSxFQUNKLGdHQUFnRztnQkFDcEcsU0FBUyxFQUFFO29CQUNQO3dCQUNJLE9BQU8sRUFBRSxpQkFBaUI7d0JBQzFCLFdBQVcsRUFBRSxVQUFVOzs7d0JBQUMsR0FBRyxFQUFFLENBQUMsNEJBQTRCLEVBQUM7d0JBQzNELEtBQUssRUFBRSxJQUFJO3FCQUNkO2lCQUNKO2FBQ0o7Ozs7WUExQkcsVUFBVSx1QkF3REwsTUFBTSxTQUFDLFVBQVU7WUFuRHRCLFNBQVMsdUJBb0RKLE1BQU0sU0FBQyxTQUFTOzs7c0JBMEJwQixZQUFZLFNBQUMsT0FBTztxQkFhcEIsWUFBWSxTQUFDLE1BQU07Ozs7Ozs7SUE3RHBCLGdEQVFHOzs7OztJQUtILGlEQUE2Qjs7Ozs7SUFLN0IsZ0RBQXFEOzs7OztJQUdqRCxrREFBMkQ7Ozs7O0lBQzNELGdEQUF1RCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gICAgQWZ0ZXJWaWV3SW5pdCxcbiAgICBEaXJlY3RpdmUsXG4gICAgRWxlbWVudFJlZixcbiAgICBmb3J3YXJkUmVmLFxuICAgIEhvc3RMaXN0ZW5lcixcbiAgICBJbmplY3QsXG4gICAgT25EZXN0cm95LFxuICAgIFJlbmRlcmVyMixcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0NvbnRyb2xWYWx1ZUFjY2Vzc29yLCBOR19WQUxVRV9BQ0NFU1NPUn0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG4vKlxuICogVGhpcyBpcyBhIGJhcmVib25lcyBjb250ZW50ZWRpdGFibGUge0BsaW5rIENvbnRyb2xWYWx1ZUFjY2Vzc29yfSBhbGxvd2luZyB5b3UgdG8gdXNlXG4gKiBBbmd1bGFyIGZvcm1zIHdpdGggbmF0aXZlIGNvbnRlbnRlZGl0YWJsZSBIVE1MLiBGb3Igc2VjdXJpdHkgcmVhc29ucyB5b3UgbWlnaHQgd2FudFxuICogdG8gY29uc2lkZXIgc2FuaXRpemluZyBwYXN0ZWQvZHJvcHBlZCBjb250ZW50IGJlZm9yZSB1c2luZyBpdC4gQWxzbyBtYWtlIHN1cmUgdGhhdFxuICogeW91IGRvIG5vdCBzZXQgYW55IGRhbmdlcm91cyBjb250ZW50IGFzIGNvbnRyb2wgdmFsdWUgeW91cnNlbGYsIGJlY2F1c2UgZGlyZWN0aXZlXG4gKiBqdXN0IG91dHB1dHMgY29udHJvbCB2YWx1ZSBhcy1pcy5cbiAqL1xuQERpcmVjdGl2ZSh7XG4gICAgc2VsZWN0b3I6XG4gICAgICAgICdbY29udGVudGVkaXRhYmxlXVtmb3JtQ29udHJvbE5hbWVdLCBbY29udGVudGVkaXRhYmxlXVtmb3JtQ29udHJvbF0sIFtjb250ZW50ZWRpdGFibGVdW25nTW9kZWxdJyxcbiAgICBwcm92aWRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBDb250ZW50ZWRpdGFibGVWYWx1ZUFjY2Vzc29yKSxcbiAgICAgICAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgICB9LFxuICAgIF0sXG59KVxuZXhwb3J0IGNsYXNzIENvbnRlbnRlZGl0YWJsZVZhbHVlQWNjZXNzb3JcbiAgICBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xuICAgIC8qXG4gICAgICogTXV0YXRpb25PYnNlcnZlciBJRTExIGZhbGxiYWNrIChhcyBvcHBvc2VkIHRvIGlucHV0IGV2ZW50IGZvciBtb2Rlcm4gYnJvd3NlcnMpLlxuICAgICAqIFdoZW4gbXV0YXRpb24gcmVtb3ZlcyBhIHRhZywgaS5lLiBkZWxldGUgaXMgcHJlc3NlZCBvbiB0aGUgbGFzdCByZW1haW5pbmcgY2hhcmFjdGVyXG4gICAgICogaW5zaWRlIGEgdGFnIOKAlCBjYWxsYmFjayBpcyB0cmlnZ2VyZWQgYmVmb3JlIHRoZSBET00gaXMgYWN0dWFsbHkgY2hhbmdlZCwgdGhlcmVmb3JlXG4gICAgICogc2V0VGltZW91dCBpcyB1c2VkXG4gICAgICovXG4gICAgcHJpdmF0ZSBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKFxuICAgICAgICAgICAgICAgIENvbnRlbnRlZGl0YWJsZVZhbHVlQWNjZXNzb3IucHJvY2Vzc1ZhbHVlKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5pbm5lckhUTUwsXG4gICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLypcbiAgICAgKiBvblRvdWNoIGNhbGxiYWNrIHRoYXQgbWFya3MgY29udHJvbCBhcyB0b3VjaGVkIGFuZCBhbGxvd3MgRm9ybUhvb2tzIHVzZVxuICAgICAqL1xuICAgIHByaXZhdGUgb25Ub3VjaGVkID0gKCkgPT4ge307XG5cbiAgICAvKlxuICAgICAqIG9uQ2hhbmdlIGNhbGxiYWNrIHRoYXQgd3JpdGVzIHZhbHVlIHRvIGNvbnRyb2wgYW5kIGFsbG93cyBGb3JtSG9va3MgdXNlXG4gICAgICovXG4gICAgcHJpdmF0ZSBvbkNoYW5nZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQgPSAoKSA9PiB7fTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBASW5qZWN0KEVsZW1lbnRSZWYpIHByaXZhdGUgcmVhZG9ubHkgZWxlbWVudFJlZjogRWxlbWVudFJlZixcbiAgICAgICAgQEluamVjdChSZW5kZXJlcjIpIHByaXZhdGUgcmVhZG9ubHkgcmVuZGVyZXI6IFJlbmRlcmVyMixcbiAgICApIHt9XG5cbiAgICAvKlxuICAgICAqIFRvIHN1cHBvcnQgSUUxMSBNdXRhdGlvbk9ic2VydmVyIGlzIHVzZWQgdG8gbW9uaXRvciBjaGFuZ2VzIHRvIHRoZSBjb250ZW50XG4gICAgICovXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9ic2VydmUodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsIHtcbiAgICAgICAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUsXG4gICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgICBzdWJ0cmVlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIERpc2Nvbm5lY3QgTXV0YXRpb25PYnNlcnZlciBJRTExIGZhbGxiYWNrIG9uIGRlc3Ryb3lcbiAgICAgKi9cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBMaXN0ZW4gdG8gaW5wdXQgZXZlbnRzIHRvIHdyaXRlIGlubmVySFRNTCB2YWx1ZSBpbnRvIGNvbnRyb2wsXG4gICAgICogYWxzbyBkaXNjb25uZWN0IE11dGF0aW9uT2JzZXJ2ZXIgYXMgaXQgaXMgbm90IG5lZWRlZCBpZiB0aGlzXG4gICAgICogZXZlbnQgd29ya3MgaW4gY3VycmVudCBicm93c2VyXG4gICAgICovXG4gICAgQEhvc3RMaXN0ZW5lcignaW5wdXQnKVxuICAgIG9uSW5wdXQoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlKFxuICAgICAgICAgICAgQ29udGVudGVkaXRhYmxlVmFsdWVBY2Nlc3Nvci5wcm9jZXNzVmFsdWUoXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuaW5uZXJIVE1MLFxuICAgICAgICAgICAgKSxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIExpc3RlbiB0byBibHVyIGV2ZW50IHRvIG1hcmsgY29udHJvbCBhcyB0b3VjaGVkXG4gICAgICovXG4gICAgQEhvc3RMaXN0ZW5lcignYmx1cicpXG4gICAgb25CbHVyKCkge1xuICAgICAgICB0aGlzLm9uVG91Y2hlZCgpO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogUmVhY3RzIHRvIGV4dGVybmFsIGNoYW5nZVxuICAgICAqXG4gICAgICogQHNlZSB7QGxpbmsgQ29udHJvbFZhbHVlQWNjZXNzb3Ijd3JpdGVWYWx1ZX1cbiAgICAgKi9cbiAgICB3cml0ZVZhbHVlKHZhbHVlOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCxcbiAgICAgICAgICAgICdpbm5lckhUTUwnLFxuICAgICAgICAgICAgQ29udGVudGVkaXRhYmxlVmFsdWVBY2Nlc3Nvci5wcm9jZXNzVmFsdWUodmFsdWUpLFxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogUmVnaXN0ZXJzIG9uQ2hhbmdlIGNhbGxiYWNrXG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBDb250cm9sVmFsdWVBY2Nlc3NvciNyZWdpc3Rlck9uQ2hhbmdlfVxuICAgICAqL1xuICAgIHJlZ2lzdGVyT25DaGFuZ2Uob25DaGFuZ2U6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSBvbkNoYW5nZTtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIFJlZ2lzdGVycyBvblRvdWNoIGNhbGxiYWNrXG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBDb250cm9sVmFsdWVBY2Nlc3NvciNyZWdpc3Rlck9uVG91Y2hlZH1cbiAgICAgKi9cbiAgICByZWdpc3Rlck9uVG91Y2hlZChvblRvdWNoZWQ6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy5vblRvdWNoZWQgPSBvblRvdWNoZWQ7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBTZXRzIGRpc2FibGVkIHN0YXRlIGJ5IHNldHRpbmcgY29udGVudGVkaXRhYmxlIGF0dHJpYnV0ZSB0byB0cnVlL2ZhbHNlXG4gICAgICpcbiAgICAgKiBAc2VlIHtAbGluayBDb250cm9sVmFsdWVBY2Nlc3NvciNzZXREaXNhYmxlZFN0YXRlfVxuICAgICAqL1xuICAgIHNldERpc2FibGVkU3RhdGUoZGlzYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCxcbiAgICAgICAgICAgICdjb250ZW50ZWRpdGFibGUnLFxuICAgICAgICAgICAgU3RyaW5nKCFkaXNhYmxlZCksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBudWxsIGFuZCBvdGhlciBmYWxzeSBjb250cm9sIHZhbHVlcyBhcmUgdHJlYXRlZCBhcyBlbXB0eSBzdHJpbmcgdG9cbiAgICAgKiBwcmV2ZW50IElFMTEgb3V0cHV0dGluZyAnbnVsbCcsIGFsc28gc2luZ2xlIDxicj4gaXMgcmVwbGFjZWQgd2l0aCBlbXB0eVxuICAgICAqIHN0cmluZyB3aGVuIHBhc3NlZCB0byB0aGUgY29udHJvbFxuICAgICAqL1xuICAgIHByaXZhdGUgc3RhdGljIHByb2Nlc3NWYWx1ZSh2YWx1ZTogc3RyaW5nIHwgbnVsbCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IHZhbHVlIHx8ICcnO1xuXG4gICAgICAgIHJldHVybiBwcm9jZXNzZWQudHJpbSgpID09PSAnPGJyPicgPyAnJyA6IHByb2Nlc3NlZDtcbiAgICB9XG59XG4iXX0=